<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html dir="ltr" xmlns="http://www.w3.org/1999/xhtml">  <head>    <meta http-equiv="content-type" content="application/xhtml+xml; charset=iso-8859-1" />    <meta content="built-in oma2 help pages" name="description" />    <meta content="image processing" name="keywords" />    <meta content="oma developers" name="author" />    <link media="screen" href="Light/default.css" type="text/css" rel="stylesheet" />    <title>OMA2 Help</title>  </head>  <body>    <div class="container">      <div class="navigation">        <div class="title">          <h1>OMA2</h1>          <h2>- Help -</h2>        </div>        <a href="CommandIndex.html">Index</a> <a href="macro.html">Macro</a> <a          href="file.html">File</a>        <a href="display.html">Display</a> <a href="arithmetic.html">Arithmetic</a>        <a href="index.html">First Steps</a>        <div class="clearer"><span></span></div>      </div>      <div class="holder">        <h1>Macros</h1>        Warning -- not all of this is implemented yet...<br />        <br />        ; comment<br />        The semicolon is used to add comments to OMA commands. This can follow        the last numeric argument on a command line or can be used at the        beginning of a line. For example, a macro might have lines like this:<br />        <br />            + @offset    ; the value stored in the variable &#8220;offset&#8221; will be        added to each pixel <br />            ; now display the result (the window title will be &#8220;the result&#8221;)<br />            d the result<br />        <br />            Note that adding the &#8220;; comment&#8221; at the end of a command that        expects a string or filename argument will include &#8220;; comment&#8221; as part        of the string or filename.<br />        <br />        DMACRO [n] [command]<br />        Prompts the user for lines of a command macro to be executed using the        RMACRO command. If the argument n is omitted, definition starts with        line one. If n is specified, definition begins with the nth line of the        macro. To include numerical arguments that change each time the macro is        executed, %d can be inserted in the macro command at the location where        the number will be placed upon execution of the macro. If &#8220;command&#8221; is        not present, the program prompts for additional command lines until a        null command is entered (i.e. &lt;CR&gt; only). If the optional        &#8220;command&#8221; is included on the same line, the text of &#8220;command&#8221; replaces        any command already existing at line n and no further command lines are        solicited. Dummy arguments in Macros or Execute files include the        following:<br />        %c  the number of seconds since OMA was started (float)<br />        %d  a decimal digit<br />        %s  the string specified by the STRMAC command<br />        %f  last file name<br />        %b  maximum value (big)<br />        %l  minimum value (little)<br />        %m  multiplier (the current scale factor)<br />        %t  current date and time<br />        %v  an integer value that increments by a specified amount every time it        is used<br />        Use the VALMAC command to specify the starting value and increment.<br />        %e  the result of the last error code (0 means no error)<br />        %a  the average within the currently defined rectangle<br />        %r  the rms within the currently defined rectangle<br />        %h  the height of the current image<br />        %w  the width of the current image<br />        %x  the x pixel coordinate of the last mouse click<br />        %y  the y pixel coordinate of the last mouse click<br />        <br />        ECHO string<br />        Prints &#8220;string&#8221; during macro execution. &#8220;string&#8221; can be replaced with        any of the macro dummy arguments (e.g., ECHO %b).<br />        <br />        ENDIF<br />        Terminates an IF command. This is applicable within Macros only.<br />        <br />        EXECUTE &lt;filename&gt;<br />        Reads OMA commands stored in the specified file into a special execute        buffer and then performs those commands. Unlike macros, these should not        contain dummy numerical arguments (%d).<br />        <br />        FCLOSE<br />        Closes the currently open text file (there can be only one). The use of        FOPEN, FCLOSE, and FECHO allows derived values to be written to a file        from within a macro.<br />        <br />        FECHO %s<br />        Exactly as echo but instead of printing to the command window, it writes        to the file opened with FOPEN. The use of FOPEN, FCLOSE, and FECHO        allows derived values to be written to a file from within a macro.<br />        <br />        FOPEN &lt;filename&gt;<br />        Open a text file with the name &lt;filename&gt; for I/O. The use of        FOPEN, FCLOSE, and FECHO allows derived values to be written to a file        from within a macro.<br />        <br />        GMACRO &lt;filename&gt;<br />        Loads the contents of the specified file into the current macro buffer.<br />        <br />        IF condition<br />        If condition evaluates to a non-zero value, the commands following the        IF are executed. However, if the condition is zero, the commands between        IF and ENDIF are not executed. The condition can be any arithmetic        statement and can include logical operators &lt; (less than), &gt;        (greater than), others to come....<br />        <br />        IFEXST &lt;filename&gt;<br />        If the specified filename exists, the condition is satisfied, and the        macro commands following the IFEXST command will be executed. <br />        Note: the SAVE prefix and suffix are applied to the filename before the        test is done.<br />        <br />        IFNEXS &lt;filename&gt;<br />        If the specified filename does not exist, the condition is satisfied,        and the macro commands following the IFNEXS command will be executed. <br />        Note: the SAVE prefix and suffix are applied to the filename before the        test is done.<br />        <br />        IFDEFINED variable_name<br />        If the specified variable_name is defined, the condition is satisfied,        and the macro commands following the IFDEF command will be executed.<br />        <br />        IFNDEFINED variable_name<br />        If the specified variable_name is not defined, the condition is        satisfied, and the macro commands following the IFNDEF command will be        executed.<br />        <br />        IMACRO n<br />        Used for setting or clearing a flag which determines whether or not an        executing macro can be interrupted (using &#8220;cmd .&#8221;). If n = 0,        interruption is not allowed. If n is non-0, it is. This can be used from        within a macro to ensure that certain sequences of commands are complete        before stopping the macro. (e.g., to be sure that the camera shutter is        closed.)<br />        <br />        INCMACRO n <br />        Specifies that on each execution of a macro, values should be        incremented by value n.<br />        <br />        LMACRO <br />        Lists the contents in the current macro buffer.<br />        <br />        LOOP variable_name start end [step]<br />        Initializes a loop. The variable_name can be any string of reasonable        length. The variable takes on the initial value specified by &#8220;start&#8221; and        the commands within the loop are repeated until the variable is &gt;=        &#8220;end&#8221;. ( or &lt;= &#8220;end&#8221; if step &lt; 0) If step is not specified, a step        of 1 is assumed. The end of the loop is specified by the LOOPND command.        Each LOOP must have a corresponding LOOPND. To access the value of a        loop variable, precede variable_name with &#8220;@&#8221; For example:<br />        loop fnum 2 10 2<br />        get data@fnum<br />        disp<br />        loopnd<br />        .<br />        .<br />        Note: To signify the end of a variable name when it is followed by other        characters, use a '\' character. For example:<br />        loop fnum 2 10 2<br />        get data@fnum\_corrected<br />        disp<br />        loopnd<br />        <br />        LOOPBREAK<br />        Break out of current loop.<br />        <br />        LOOPND<br />        Specifies the end of a loop initiated with the LOOP command.<br />        <br />        MACRO [n m]<br />        Like &#8220;RMACRO [n m]&#8221; except that printing of intermediate output is        automatically suppressed.<br />        <br />        PAUSE [pause_string]<br />        When executed in a macro, the PAUSE command causes macro execution to be        suspended until a key on the keyboard is pressed, at which time the        macro will continue execution. If the optional pause_string is included,        it will be echoed to the right of the Macro # in the status window. The        pause_string can contain variable names or %d type dummy arguments that        will be filled in before echoing the string. To terminate a paused        macro, type &lt;cmnd period&gt;.<br />        <br />        PMACRO n <br />        Executes commands in the current macro buffer with &#8220;%d&#8221;s being replaced        by the value n.<br />        <br />        RMACRO [n m] <br />        Starts executing commands in the macro buffer with %d being replaced        first by value n. Subsequently, n is incremented by the amount specified        in the INCMACRO command (default is 1). If the new numeric value is        equal to m, the macro will be executed again. Menu items can be selected        and the appropriate commands executed during macros. Commands typed        during the execution of a macro will be echoed to the terminal but not        performed. To stop a macro during execution type &#8220;cmd .&#8221; (hold down the        apple key and type &#8220;.&#8221;)<br />        <br />        SMACRO <br />        Saves the contents of the current macro buffer to a specified file.        SMACRO is also used to save commands to be used with the EXECUTE        command.<br />        <br />        STRMACRO string<br />        Specifies that &#8220;string&#8221; is to be substituted for any &#8220;%s&#8221; found in macro        or execute commands. If no string is specified, the current string is        printed.<br />        <br />        VALMACRO [Startval Incval]<br />        Resets the %v value to &#8220;Startval&#8221; (0 is default) with an increment of        &#8220;Incval&#8221;<br />        <br />      </div>      <div class="footer">Brought to you by Developers of OMA<br />          </div>    </div>  </body></html>