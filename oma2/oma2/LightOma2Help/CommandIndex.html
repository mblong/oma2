<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html dir="ltr" xmlns="http://www.w3.org/1999/xhtml">  <head>    <meta http-equiv="content-type" content="application/xhtml+xml; charset=iso-8859-1" />    <meta content="built-in oma2 help pages" name="description" />    <meta content="image processing" name="keywords" />    <meta content="oma developers" name="author" />    <link media="screen" href="Light/default.css" type="text/css" rel="stylesheet" />    <title>OMA2 Help</title>  </head>  <body>    <div class="container">      <div class="navigation">        <div class="title">          <h1>OMA2</h1>          <h2>- Help -</h2>        </div>        <a href="CommandIndex.html">Index</a> <a href="macro.html">Macro</a> <a          href="file.html">File</a>        <a href="display.html">Display</a> <a href="arithmetic.html">Arithmetic</a>        <a href="index.html">First Steps</a>        <div class="clearer"><span></span></div>      </div>      <div class="holder">        <h1>Command Index</h1>        + x<br />        Adds x to the data in the current image data buffer.<br />        <br />        - x<br />        Subtracts x from the data in the current image data buffer.<br />        <br />        * x<br />        Multiplies the data in the current image data buffer by x.<br />        <br />        / x<br />        Divides the data in the current image data buffer by x.<br />        <br />        ^ x<br />        Raises the data in the current image data to the power x.<br />        <br />        <br />        ADDFILE &lt;filename&gt;<br />        Adds the contents of an OMA file of a given name to the data in the        current image data buffer.<br />        <br />        ADDTMPIMAGE name<br />        Adds the contents of the named temporary image to the data in the        current image data buffer.<br />        <br />        ABEL<br />        Calculate the abel inversion using three-point abel inversion operator        Di,j. The index i,j start from 0. The formula followed Dasch 1992        (Applied Optics) which contains several typos. One correction is done in        function OP1 following  Martin's PhD thesis.<br />        <br />        ABELRECT rec_width [rec_y0 rec_y1]<br />        Sets the rectangle (of width rec_width) according to the centroid of the        image. If rec_y0 and rec_y1 are omitted, they are taken to be the top        and bottom of the image.<br />        <br />        ABELPREP clip_value [fill_value]<br />        Finds the maximum pixel value along horizontal lines in the image. If        that maximum is &lt; clip_value, the entire horizontal line is set to        fill_value. Default for fill_value is 0.<br />        <br />        ACADD<br />        Adds the current image data buffer to the accumulator buffer.<br />        <br />        ACCUMULATE<br />        Allocates and clears memory for an image accumulator buffer that can be        used to sum individual images. The size of the accumulator is determined        by the image size parameters when the accumulate command is first given.<br />        <br />        ACDELETE<br />        Frees the memory associated with the accumulator. <br />        <br />        ACGET<br />        Moves the data from the accumulator buffer into the current image data        area. The previous contents of the image data buffer are destroyed.<br />        <br />        BLOCK n [m]<br />        Group the image data into n x m blocks (rows x cols). This command        reduces the size of the data buffer. The values are summed, pending        implementation of the BLKAVE command. If the image is flagged as color,        the three color planes are treated separately.<br />        <br />        BIT8 [min] [max]<br />        Converts the file in the OMA image buffer to have a dynamic range of 0        to 255. That is, 8 unsigned bits per pixel. This conversion is        automatically done before saving the image buffer as a TIFF image. If        the optional min and max are specified, they are used for the scaling        rather than the min and max of the current image buffer.<br />        <br />        BIT16 [min] [max]<br />        Converts the file in the OMA image buffer to have a dynamic range of 0        to 65535. That is, 16 unsigned bits per pixel. This conversion is        automatically done before saving the image buffer as a TIFF image with        the SATIFFSCALED command. If the optional min and max are specified,        they are used for the scaling rather than the min and max of the current        image buffer.<br />        <br />        CALCULATE<br />        Print calculations on the rectangle specified with the RECTANGLE command        or with the rectangle tools. The average, rms, # of points, and the x        and y "center of mass" are printed. The mean, rms, centroid_X and        centroid_Y are passed to the command_return_variables.<br />        <br />        CALCALL<br />        Print calculations on the entire image. The average, rms, # of points,        and the x and y "center of mass" are printed. The mean, rms, centroid_X        and centroid_Y are passed to the command_return_variables.<br />        <br />        CLIP value<br />        Sets all data values in the current image buffer that are &gt; value to        value.<br />        <br />        CLIPBOTTOM clip_value<br />        For the current image, set pixels whose value is &lt; clip_value to be        equal to clip_value.<br />        <br />        CLIPFBOTTOM clip_fraction<br />        For the current image, set pixels whose value is &lt;        clip_fraction*image_max to be equal to clip_fraction*image_max.<br />        <br />        CLIPFRACTION fraction<br />        Clip data at a fraction of the maximum value. Fraction is a real        argument.<br />        <br />        CROP<br />        Use the current rectangle to crop the image in the buffer.<br />        <br />        COMPOSITE  &lt;filename&gt; <br />        Create a composite image by appending the data in the specified file to        that which exists in the current image buffer. The width of the        specified file must be the same as that of the current image. <br />        <br />        COMTEMPIMAGE name <br />        Create a composite image by appending the data in the named temporary        image to that which exists in the current image buffer. The width of the        specified temporary image be the same as that of the current image.<br />        <br />        COLORFLAG [value]<br />        If an argument is given, the IS_COLOR flag is set to 0 (flag = 0) or 1        (anything else). If no argument is given, the current value of the color        flag is printed.<br />        <br />        CMINMX n m <br />        Specifies the minimum (n) and maximum (m) values in the data that        correspond to the minimum and maximum color or gray scale values.        Specifying the values causes the "Auto Scale" feature to be disabled. If        the arguments are not given, the "Auto Scale" feature is enabled.<br />        <br />        CYL2<br />        Treat the data in the current image as a half cross section of a        cylindrically symmetric intensity distribution. The centerline is        assumed to be along the LHS of the image. An integrated image is        calculated by rotating the image  about the centerline. Does a parallel        projection.<br />        <br />        CLEARBADPIX<br />        Sets pixels tagged as bad to the value of their 8 nearest neighbors.        This will not work well if there are contiguous bad pixels. For that,        consider using the FILBOX or FILMSK commands.<br />        <br />        DISPLAY [string] <br />        Opens a window on the Macintosh screen and displays the contents of the        current data buffer. The color palette used can be determined by the        PALETTE command. The color minimum and maximum are specified by the        CMINMX command. There can be up to 9 image windows open at one time.        Windows can be resized, moved around the screen, and closed as in other        Macintosh applications. If the optional string is specified, the window        will be named according to the string.<br />        <br />        DMACRO [n] [command]<br />        Prompts the user for lines of a command macro to be executed using the        RMACRO command. If the argument n is omitted, definition starts with        line one. If n is specified, definition begins with the nth line of the        macro. To include numerical arguments that change each time the macro is        executed, %d can be inserted in the macro command at the location where        the number will be placed upon execution of the macro. If "command" is        not present, the program prompts for additional command lines until a        null command is entered (i.e. &lt;CR&gt; only). If the optional        "command" is included on the same line, the text of "command" replaces        any command already existing at line n and no further command lines are        solicited. Dummy arguments in Macros or Execute files include the        following:<br />        %c  the number of seconds since OMA was started (float)<br />        %d  a decimal digit<br />        %s  the string specified by the STRMAC command<br />        %f  last file name<br />        %b  maximum value (big)<br />        %l  minimum value (little)<br />        %m  multiplier (the current scale factor)<br />        %t  current date and time<br />        %v  an integer value that increments by a specified amount every time it        is used<br />        Use the VALMAC command to specify the starting value and increment.<br />        %e  the result of the last error code (0 means no error)<br />        %a  the average within the currently defined rectangle<br />        %r  the rms within the currently defined rectangle<br />        %h  the height of the current image<br />        %w  the width of the current image<br />        %x  the x pixel coordinate of the last mouse click<br />        %y  the y pixel coordinate of the last mouse click<br />        %pFilled in with the "save data" prefix<br />        %qFilled in with the "get data" prefix<br />        <br />        DIVFILE &lt;filename&gt;<br />        Divides the data in the current buffer by the contents of the specified        file.<br />        <br />        DIVTMPIMAGE name<br />        Divides the data in the current buffer by the contents of the named        temporary image.<br />        <br />        DIFFX<br />        Differentiate the data in the current image data buffer in the x        direction. <br />        <br />        DIFFY<br />        Differentiate the data in the current image data buffer in the y        direction.<br />        <br />        DCRAWARGS  [arguments]<br />        Allows the user to specify the arguments passed to the dcraw routine,        which decodes camera raw files to OMA format. Omitting the argument        lists the allowed arguments and gives the current argument settings. The        filename field is ignored.<br />        <br />        DELAY nticks<br />        Waits nticks/60 seconds before continuing on to the next command. Use        this for rough timing operations.<br />        <br />        DMNMX<br />        Displays the color min and max in the window.<br />        <br />        ERASE [n] <br />        If no argument is given, all image windows currently on the screen are        closed. If a value n is specified, only window n is erased.<br />        <br />        ECHO string<br />        Prints "string" during macro execution. "string" can be replaced with        any of the macro dummy arguments (e.g., ECHO %b).<br />        <br />        ENDIF<br />        Terminates an IF command. This is applicable within Macros only.<br />        <br />        EXECUTE &lt;filename&gt;<br />        Reads OMA commands stored in the specified file into a special execute        buffer and then performs those commands. Unlike macros, these should not        contain dummy numerical arguments (%d).<br />        <br />        FFT mode scale_factor<br />        mode = 0  return the magnitude scaled by scale_factor<br />        mode = 1  return the real part scaled by scale_factor<br />        mode = 2  return the imaginary part scaled by scale_factor<br />        mode = 3  return inverse - input is real part scaled by scale_factor<br />        mode = 4  return inverse - input is imaginary part scaled by        scale_factor<br />        mode = 5  return the log of the magnitude squared scaled by scale_factor<br />        mode = 6  return the magnitude squared scaled by scale_factor<br />        mode = 7  return the autocorrelation scaled by scale_factor<br />        mode = 8  return inverse - input is a filter scaled by n<br />        <br />        FLOATVARIABLE variable_name<br />        Specifies that variable_name is to be used as a floating point variable.<br />        <br />        FOLD fraction new_width<br />        Fold an image in half vertically. It is assumed to be symmetric about        some nearly verticle axis. The center of symmetry is found separately        for each row, except if there are dark regions at the top and bottom of        the image. For the dark regions, the average center of the middle part        of the image is used as the center of symmetry. Dark regions are rows        (at the top and bottom) whose values are all less than        fraction*image_max. x0,y0 and x1,y1 are coordinates of the top and        bottom of the dark region, center is the average center. These are        returned in command_return_1-5.<br />        <br />        FTEMPIMAGE tempImage<br />        Free memory associated with temporary image tempImage. tempImage must be        in the range 0-9, or correspond to a named image.<br />        <br />        FCLOSE<br />        Closes the currently open text file (there can be only one). The use of        FOPEN, FCLOSE, and FECHO allows derived values to be written to a file        from within a macro.<br />        <br />        FECHO string<br />        Exactly as echo but instead of printing to the command window, it writes        to the file opened with FOPEN. The use of FOPEN, FCLOSE, and FECHO        allows derived values to be written to a file from within a macro.<br />        <br />        FOPEN &lt;filename&gt;<br />        Open a text file with the name &lt;filename&gt; for I/O. The use of        FOPEN, FCLOSE, and FECHO allows derived values to be written to a file        from within a macro.<br />        <br />        FINDBADPIX Counts<br />        Searches the current image buffer for pixels whose value is more than        "Counts" above that of its nearest eight neighbors. Those pixels are        tagged as hot pixels.<br />        <br />        GET &lt;filename&gt;<br />        Loads the data from the specified file into the current image data        buffer. The "Get Data Files" prefix is used. The "Get Data Files" suffix        is used unless the specified filename has a suffix of .jpg, .tiff, .tif,        or .nef; in those cases no suffix is added and the appropriate decoding        routines are called according to the file type.<br />        <br />        GETFILENAMES NameFile<br />        Open NameFile (currently uses macro prefix and suffix) which contains        the names of files. The NEXTFILE command is used to open the next file.        NameFile is left open until all files have been accessed.<br />        <br />        GETSETTINGS [filename]<br />        Gets settings from the specified file (uses the appropriate prefix and        suffix specified in the preferences). If no filename is given, OMA        Settings from within the oma application are loaded.<br />        <br />        GETFUNCTION n filename<br />        Read in a tabulated function to be used by the LOOKUP command. n is the        function number to be defined. filename is file containing y=f(x) data        pairs, preceeded by number of table entries.<br />        Assumptions for tabulated functions:<br />        File format:<br />        first number is integer with the number of pairs to follow<br />        pairs are float with x followed by f(x) on the same line<br />        x values are ordered smallest to largest<br />        y = f(x) is single valued<br />        <br />        GMACRO &lt;filename&gt;<br />        Loads the contents of the specified file into the current macro buffer.<br />        <br />        GAUSSIAN EdgeValue [x0 y0]<br />            Generate a Gaussian distribution centered at x0, y0. If x0, and y0,        are not specified, the distribution is centered. The maximum is 1. For a        centered distribution, EdgeValue specifies the value of the distribution        at the center edge.<br />        <br />        GREY2RGB [scaleRed scaleGreen scaleBlue]<br />        Turns a single plane image into a three plane RGB image. The optional        weighting factors are applied to each color plane.<br />        <br />        GRADIENT<br />        Find the magnitude of the gradient of the data in the current image        buffer. Use two pixels on either side of current pixel for gradient.<br />        <br />        GSMOOTH dx [dy]<br />        Gaussian Smoothing of the data. dx and dy are the smoothing size        parameters. If dy is omitted, it is taken as dx. dx and dy must be odd.        sigma_x = (dx-1)/3.5<br />        <br />        GTEMPIMAGE name<br />        Get temporary image that has been previously saved using STEMP.<br />        <br />        HELP [command name or fragment]<br />        If a command name is given, a brief explanation of the command is        printed in the command window. If only part of the command is given, a        description of all commands that match the command fragment is printed.        All help information is from the file "OMA HELP." If no argument is        given, all command names are printed with no explanation.<br />        <br />        IF condition<br />        If condition evaluates to a non-zero value, the commands following the        IF are executed. However, if the condition is zero, the commands between        IF and ENDIF are not executed. The condition can be any arithmetic        statement and can include logical operators &lt; (less than), &gt;        (greater than), others to come....<br />        <br />        INVERT<br />        Inverts the image in the current image data buffer, causing the first        data point to become the last data point.<br />        <br />        INTVARIABLE variable_name<br />        Specifies that variable_name is to be used as an integer variable.<br />        <br />        KILLBOX [value]<br />        Much like FILLBOX, this command works on the region of the image that        has been specified with the RECT command or mouse. The contents of this        region are set to 'value'. Default for 'value' is 0.<br />        <br />        KWABEL n<br />        Uses analytic evaluation of integral required for abel inversion, which        involves a lot of evaluations of ln(x). n is a scale factor for the        image.<br />        <br />        LIST<br />        Lists the current detector parameters and log block.<br />        <br />        LABEL text_string<br />        Display the text_string in the upper left of the current window.<br />        <br />        LMACRO<br />        Lists the contents in the current macro buffer.<br />        <br />        LOOP variable_name start end [step]<br />        Initializes a loop. The variable_name can be any string of reasonable        length. The variable takes on the initial value specified by "start" and        the commands within the loop are repeated until the variable is &gt;=        "end". ( or &lt;= "end" if step &lt; 0) If step is not specified, a step        of 1 is assumed. The end of the loop is specified by the LOOPND command.        Each LOOP must have a corresponding LOOPND. To access the value of a        loop variable, precede variable_name with "@" For example:<br />        loop fnum 2 10 2<br />        get data@fnum<br />        disp<br />        loopnd<br />        .<br />        .<br />        Note: To signify the end of a variable name when it is followed by other        characters, use a '\' character. For example:<br />        loop fnum 2 10 2<br />        get data@fnum\_corrected<br />        disp<br />        loopnd<br />        <br />        LOOPBREAK<br />        Break out of current loop.<br />        <br />        LOOPND<br />        Specifies the end of a loop initiated with the LOOP command.<br />        <br />        LOOKUP fn_number <br />        Redefine the current image using the lookup table specified by a        tabulated function. Use GETFUNCT n filename before using this command.<br />        <br />        LTEMPIMAGE <br />        List defined temporary images.<br />        <br />        MACRO [n m]<br />        Like "RMACRO [n m]" except that printing of intermediate output is        automatically suppressed.<br />        <br />        MAKNEW n m<br />        Change the resolution of the data in the current data buffer to be n        rows x m columns. Bilinear interpolation is performed.<br />        <br />        MIRROR<br />        Form a left-right mirror image operation on the data in the current data        buffer.<br />        <br />        MULFILE &lt;filename&gt;<br />        Multiplies the contents of the current data buffer by the contents of        the specified file.<br />        <br />        MULTMPIMAGE name<br />        Multiplies the contents of the current data buffer by the contents of        the named temporary image.<br />        <br />        NEWWINDOW flag<br />        If flag = 1 (default), a new window will be opened for each "DISPLAY"        command. If flag = 0, the results of "DISPLAY" commands will be placed        in the last-opened window. If no window exists, a new one will be        opened. <br />        <br />        NEXTFILE [prefix]<br />        Open the next file specified in the FileNames file that was opened with        the GetFileNames command. If a prefix is specified, that is added to the        name before trying to open the file. command_return_1 is the the        filename without any prefix and without the extension (last 4        characters).<br />        <br />        PALETTE n<br />        Specifies that the nth predefined color palette should be used. Palette        0 is a color palette; 1 is a gray-scale palette.<br />        <br />        POSITVE<br />        Sets all negative values in the image buffer to 0.  Positive values are        unaffected.<br />        <br />        POWER y<br />        Raise the data in the current image buffer to the power y (float).<br />        <br />        RAMP<br />        Fill current image with a ramp from 0 to the number of number of        channels.<br />        <br />        RECTANGLE ulx uly lrx lry<br />        Specify a rectangle that calculations are to be done on. The arguments        are upper left x coordinate; upper left y coordinate; lower right x;        lower right y.<br />        <br />        RGB2RED<br />        Get the red channel of the current color image.<br />        <br />        RGB2GREEN<br />        Get the green channel of the current color image.<br />        <br />        RGB2BLUE<br />        Get the blue channel of the current color image.<br />        <br />        RMACRO [n m] <br />        Starts executing commands in the macro buffer with %d being replaced        first by value n. Subsequently, n is incremented by the amount specified        in the INCMACRO command (default is 1). If the new numeric value is        equal to m, the macro will be executed again. Menu items can be selected        and the appropriate commands executed during macros. Commands typed        during the execution of a macro will be echoed to the terminal but not        performed. To stop a macro during execution type "cmd ." (hold down the        apple key and type ".")<br />        <br />        ROTATE [value]<br />        Rotates the data in the current image buffer.  If no value is specified,        the image is rotated by 90 degrees. If a value is specified, the image        is rotated by the specified number of degrees (this may be a real        number).<br />        <br />        READBADPIX filename<br />        Read in bad pixel data from a text file.<br />        Format is:<br />        # of bad pixels<br />        detector_widthdetector_height<br />        bad_pix1_x<br />        bad_pix1_y<br />        bad_pix2_x<br />        bad_pix2_y<br />        .<br />        .<br />        .<br />        <br />        RNDOFF<br />        Round the DATAWORD values Down to the nearest integer value.<br />        <br />        RNDUP<br />        Round the DATAWORD values UP to the nearest integer value.<br />        <br />        SAVEFILE &lt;filename&gt;<br />        Saves the current data buffer to the specified file.<br />        <br />        SAVSETTINGS [filename]<br />        Saves the current settings to the specified file (uses the appropriate        prefix and suffix specified in the preferences). If no filename is        given, OMA Settings are saved within the oma application. <br />        <br />        SATIFF &lt;filename&gt; <br />        Converts the contents of the OMA Image buffer to 8 bit unsigned data and        then uses the LibTIFF TIFFWriteEncodedStrip function to save the data to        a TIFF image specified on the command line. The 'save' file prefixes are        used. A ".tif" extension is automatically appended to the filename. To        save as a color image, use the COLORFLAG command to set the flag        appropriately.<br />        <br />        SATIFFSCALED min max &lt;filename&gt;<br />        Convert image to 16 bit and save as a TIFF file. Uses the specified min        and max for scaling rather than the min and max of the image in the        buffer. Results will be between 0 - 65535. Depending on min and max, the        image may be clipped or the full 16-bit dynamic range may not be used.        To save as a color image, use the COLORFLAG command to set the flag        appropriately.<br />        <br />        SIZE rows cols<br />        Set the number of rows and columns of the current image and zero the        data.<br />        <br />        SINGRID radius<br />        Draw grid from the sine function.<br />        <br />        STEMPIMAGE name<br />        Save current image as temporary image with specified name. The name can        be 0-9 or a text string beginning with a lower case letter. This can be        retrieved with GTEMP.<br />        <br />        STRMACRO string<br />        Specifies that "string" is to be substituted for any "%s" found in macro        or execute commands. If no string is specified, the current string is        printed.<br />        <br />        SMOOTH [n,m]<br />        Performs an n x m smoothing operation on data in the current image        buffer.  If only n is specified, an n x n smoothing is done; with no        argument, a 2 x 2 smoothing is performed.  For the smoothing operation        to be perfectly centered on each data point, the arguments must be odd.        For Gaussian smoothing, use GSMOOTH.<br />        <br />        SUBFILE &lt;filename&gt;<br />        Subtracts the contents of the specified file from the data in the        current buffer.<br />        <br />        SHELL shell_command<br />        Opens a pipe to a shell and sends along the command. Output from the        command is echoed to the command window.<br />        <br />        STOPONERROR flag<br />        If flag = 1, macro or execute commands will stop on error conditions. If        flag = 0 (default) execution will continue.<br />        <br />        SUBTMPIMAGE name<br />        Subtracts the contents of the named temporary image from the data in the        current buffer.<br />        <br />        TSMOOTH<br />        Smooth radius based on x_dim = Temp[0], y_dim = Temp[1]. This is a        function that enables (Rectangular) smoothing of an image, with variable        filter size. It works basically like SMOOTH 13 13, say, but it takes the        x_dim and y_dim locally based on the values in the  Temporary buffers        T[0] and T[1]. It has been used to variably smooth an image based on the        local length scale which was modeled.<br />        <br />        VARIABLES<br />        Lists currently defined variables and their values. Variables are        defined using simple arithmetic expressions, such as<br />        my_var = 10<br />        or<br />        y = my_var*2<br />        The values of variables are accessed from other commands using @my_var.        For example,<br />        + @my_var<br />        or<br />        save datfile_@4myvar<br />        As with loops, the end of a variable can be tagged by adding a '\' For        example,<br />        save datfile_@my_var\_corrected<br />        See also commands FLOAT and INTVARIABLE<br />        <br />        WRITEBADPIX filename<br />        save bad pixel data to a text file.<br />        Format is:<br />        # of bad pixels<br />        detector_width detector_height<br />        bad_pix1_x<br />        bad_pix1_y<br />        bad_pix2_x<br />        bad_pix2_y<br />        .<br />        .<br />        .<br />        <br />        <br />      </div>      <div class="footer">Brought to you by Developers of OMA<br />          </div>    </div>  </body></html>